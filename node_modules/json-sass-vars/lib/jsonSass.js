'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.convertJs = undefined;

var _through = require('through2');

var _through2 = _interopRequireDefault(_through);

var _jsToSassString = require('./jsToSassString');

var _jsToSassString2 = _interopRequireDefault(_jsToSassString);

var _objectAssign = require('object-assign');

var _objectAssign2 = _interopRequireDefault(_objectAssign);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULTS = {
  prefix: '',
  suffix: ';'
};

function jsonSass(opts) {
  var options = (0, _objectAssign2.default)({}, DEFAULTS, opts);

  return (0, _through2.default)(function (chunk, enc, callback) {
    var jsValue = void 0;
    try {
      jsValue = JSON.parse(chunk);
    } catch (err) {
      return callback(err);
    }
    var sassString = (0, _jsToSassString2.default)(jsValue);
    sassString = options.prefix + sassString + options.suffix;
    this.push(sassString);
    callback();
  });
}

//
// Cover all require use cases.
//
jsonSass.convertJs = _jsToSassString2.default;
module.exports = jsonSass;

exports.default = jsonSass;
exports.convertJs = _jsToSassString2.default;